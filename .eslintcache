[{"/Users/jonasbarsten/Documents/React/react-audio-mixer/src/reportWebVitals.js":"1","/Users/jonasbarsten/Documents/React/react-audio-mixer/src/App.js":"2","/Users/jonasbarsten/Documents/React/react-audio-mixer/src/index.js":"3","/Users/jonasbarsten/Documents/React/react-audio-mixer/src/components/Controls.js":"4","/Users/jonasbarsten/Documents/React/react-audio-mixer/src/components/Clock.js":"5","/Users/jonasbarsten/Documents/React/react-audio-mixer/src/utils.js":"6","/Users/jonasbarsten/Documents/React/react-audio-mixer/src/components/AudioAnalyser.js":"7","/Users/jonasbarsten/Documents/React/react-audio-mixer/src/components/AudioVisualiser.js":"8","/Users/jonasbarsten/Documents/React/react-audio-mixer/src/components/Fader.js":"9","/Users/jonasbarsten/Documents/React/react-audio-mixer/src/components/Meter.js":"10","/Users/jonasbarsten/Documents/React/react-audio-mixer/src/components/Panner.js":"11","/Users/jonasbarsten/Documents/React/react-audio-mixer/src/components/Channel.js":"12","/Users/jonasbarsten/Documents/React/react-audio-mixer/src/components/Track.js":"13","/Users/jonasbarsten/Documents/React/react-audio-mixer/src/components/Mixer.js":"14","/Users/jonasbarsten/Documents/React/react-audio-mixer/src/context/Audio.js":"15","/Users/jonasbarsten/Documents/React/react-audio-mixer/src/components/Home.js":"16","/Users/jonasbarsten/Documents/React/react-audio-mixer/src/components/Vu.js":"17","/Users/jonasbarsten/Documents/React/react-audio-mixer/src/components/TestComponent.js":"18","/Users/jonasbarsten/Documents/React/react-audio-mixer/src/components/Loader.js":"19","/Users/dev/Documents/stokkmaur/react-audio-mixer/src/index.js":"20","/Users/dev/Documents/stokkmaur/react-audio-mixer/src/components/TestComponent.js":"21","/Users/dev/Documents/stokkmaur/react-audio-mixer/src/components/Mixer.js":"22","/Users/dev/Documents/stokkmaur/react-audio-mixer/src/components/Track.js":"23","/Users/dev/Documents/stokkmaur/react-audio-mixer/src/components/Clock.js":"24","/Users/dev/Documents/stokkmaur/react-audio-mixer/src/utils.js":"25","/Users/dev/Documents/stokkmaur/react-audio-mixer/src/components/Panner.js":"26","/Users/dev/Documents/stokkmaur/react-audio-mixer/src/context/Audio.js":"27","/Users/dev/Documents/stokkmaur/react-audio-mixer/src/components/Controls.js":"28","/Users/dev/Documents/stokkmaur/react-audio-mixer/src/components/Fader.js":"29","/Users/dev/Documents/stokkmaur/react-audio-mixer/src/components/Loader.js":"30","/Users/dev/Documents/stokkmaur/react-audio-mixer/src/App.js":"31","/Users/dev/Documents/stokkmaur/react-audio-mixer/src/components/Channel.js":"32","/Users/dev/Documents/stokkmaur/react-audio-mixer/src/components/Vu.js":"33","/Users/dev/Documents/stokkmaur/react-audio-mixer/src/components/Meter.js":"34","/Users/dev/Documents/stokkmaur/react-audio-mixer/src/components/Home.js":"35","/Users/dev/Documents/stokkmaur/react-audio-mixer/src/libs/createPlaybackTrack.js":"36","/Users/dev/Documents/stokkmaur/react-audio-mixer/src/libs/audio.js":"37","/Users/dev/Documents/stokkmaur/react-audio-mixer/src/libs/createMasterTrack.js":"38","/Users/dev/Documents/stokkmaur/react-audio-mixer/src/reportWebVitals.js":"39","/Users/dev/Documents/stokkmaur/react-audio-mixer/src/libs/createInputTrack.js":"40","/Users/dev/Documents/stokkmaur/react-audio-mixer/src/hooks/useQueryParams.js":"41","/Users/dev/Documents/stokkmaur/react-audio-mixer/src/components/Header.js":"42","/Users/dev/Documents/stokkmaur/react-audio-mixer/src/libs/audio-test.js":"43"},{"size":362,"mtime":1611525355760,"results":"44","hashOfConfig":"45"},{"size":832,"mtime":1612098203818,"results":"46","hashOfConfig":"45"},{"size":500,"mtime":1612028630362,"results":"47","hashOfConfig":"45"},{"size":1346,"mtime":1615216446646,"results":"48","hashOfConfig":"45"},{"size":1212,"mtime":1611543945032,"results":"49","hashOfConfig":"45"},{"size":4068,"mtime":1612034640959,"results":"50","hashOfConfig":"45"},{"size":1101,"mtime":1611544801634,"results":"51","hashOfConfig":"45"},{"size":1111,"mtime":1611545277878,"results":"52","hashOfConfig":"45"},{"size":1186,"mtime":1612106653056,"results":"53","hashOfConfig":"45"},{"size":774,"mtime":1615213220080,"results":"54","hashOfConfig":"45"},{"size":2619,"mtime":1615211064937,"results":"55","hashOfConfig":"45"},{"size":1491,"mtime":1615218358077,"results":"56","hashOfConfig":"45"},{"size":273,"mtime":1612098192538,"results":"57","hashOfConfig":"45"},{"size":784,"mtime":1615219294520,"results":"58","hashOfConfig":"45"},{"size":10618,"mtime":1615220656495,"results":"59","hashOfConfig":"45"},{"size":1295,"mtime":1612106706052,"results":"60","hashOfConfig":"45"},{"size":2007,"mtime":1612096689887,"results":"61","hashOfConfig":"45"},{"size":1690,"mtime":1612091610273,"results":"62","hashOfConfig":"45"},{"size":211,"mtime":1612019178648,"results":"63","hashOfConfig":"45"},{"size":500,"mtime":1615484824432,"results":"64","hashOfConfig":"65"},{"size":1690,"mtime":1615287088684,"results":"66","hashOfConfig":"65"},{"size":765,"mtime":1615394501239,"results":"67","hashOfConfig":"65"},{"size":273,"mtime":1615382232401,"results":"68","hashOfConfig":"65"},{"size":1378,"mtime":1615485631635,"results":"69","hashOfConfig":"65"},{"size":4068,"mtime":1615287088692,"results":"70","hashOfConfig":"65"},{"size":2747,"mtime":1615819121408,"results":"71","hashOfConfig":"65"},{"size":9372,"mtime":1615817615267,"results":"72","hashOfConfig":"65"},{"size":1915,"mtime":1615805722860,"results":"73","hashOfConfig":"65"},{"size":1210,"mtime":1615484115263,"results":"74","hashOfConfig":"65"},{"size":305,"mtime":1615323754028,"results":"75","hashOfConfig":"65"},{"size":647,"mtime":1615556512237,"results":"76","hashOfConfig":"65"},{"size":1939,"mtime":1615558580253,"results":"77","hashOfConfig":"65"},{"size":2007,"mtime":1615287088684,"results":"78","hashOfConfig":"65"},{"size":774,"mtime":1615287088683,"results":"79","hashOfConfig":"65"},{"size":1295,"mtime":1615487563385,"results":"80","hashOfConfig":"65"},{"size":1668,"mtime":1615817572612,"results":"81","hashOfConfig":"65"},{"size":7544,"mtime":1615814385743,"results":"82","hashOfConfig":"65"},{"size":1038,"mtime":1615398638405,"results":"83","hashOfConfig":"65"},{"size":362,"mtime":1615287088690,"results":"84","hashOfConfig":"65"},{"size":1871,"mtime":1615399655451,"results":"85","hashOfConfig":"65"},{"size":1030,"mtime":1615553755197,"results":"86","hashOfConfig":"65"},{"size":287,"mtime":1615800081434,"results":"87","hashOfConfig":"65"},{"size":6744,"mtime":1615819365432,"results":"88","hashOfConfig":"65"},{"filePath":"89","messages":"90","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"91"},"6ni04",{"filePath":"92","messages":"93","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"94","usedDeprecatedRules":"95"},{"filePath":"96","messages":"97","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"98"},{"filePath":"99","messages":"100","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"101","messages":"102","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"98"},{"filePath":"103","messages":"104","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"105"},{"filePath":"106","messages":"107","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"108"},{"filePath":"109","messages":"110","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"111"},{"filePath":"112","messages":"113","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"91"},{"filePath":"114","messages":"115","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"116","messages":"117","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"118","messages":"119","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"120","messages":"121","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"98"},{"filePath":"122","messages":"123","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"124","messages":"125","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"126","messages":"127","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"91"},{"filePath":"128","messages":"129","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"130","usedDeprecatedRules":"131"},{"filePath":"132","messages":"133","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"134","usedDeprecatedRules":"135"},{"filePath":"136","messages":"137","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"138","messages":"139","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"140"},"xqqwo4",{"filePath":"141","messages":"142","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"143","messages":"144","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"145","usedDeprecatedRules":"140"},{"filePath":"146","messages":"147","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"148"},{"filePath":"149","messages":"150","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"151"},{"filePath":"152","messages":"153","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"148"},{"filePath":"154","messages":"155","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"156","messages":"157","errorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"158","messages":"159","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"148"},{"filePath":"160","messages":"161","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"162"},{"filePath":"163","messages":"164","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"165"},{"filePath":"166","messages":"167","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"148"},{"filePath":"168","messages":"169","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"170"},{"filePath":"171","messages":"172","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"130","usedDeprecatedRules":"140"},{"filePath":"173","messages":"174","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"175"},{"filePath":"176","messages":"177","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"140"},{"filePath":"178","messages":"179","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"180","messages":"181","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"182","usedDeprecatedRules":"148"},{"filePath":"183","messages":"184","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"140"},{"filePath":"185","messages":"186","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"187"},{"filePath":"188","messages":"189","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"190"},{"filePath":"191","messages":"192","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"170"},{"filePath":"193","messages":"194","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"148"},{"filePath":"195","messages":"196","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"/Users/jonasbarsten/Documents/React/react-audio-mixer/src/reportWebVitals.js",[],["197","198"],"/Users/jonasbarsten/Documents/React/react-audio-mixer/src/App.js",["199"],"import React from \"react\";\nimport Home from \"./components/Home\";\nimport AudioContextProvider from \"./context/Audio\";\n\nimport TestComponent from \"./components/TestComponent\";\n\nimport \"./fonts/digital-7.eot\";\nimport \"./fonts/digital-7.svg\";\nimport \"./fonts/digital-7.ttf\";\nimport \"./fonts/digital-7.woff\";\n\nimport \"./stylesheets/normalize.css\";\nimport \"./stylesheets/normalize-edit.css\";\nimport \"./stylesheets/fonts.css\";\nimport \"./stylesheets/loader.css\";\nimport \"./stylesheets/main.css\";\n\nconst App = () => {\n  return (\n    <>\n      <AudioContextProvider>\n        <div className=\"App\">\n          <header>\n            <h1>Stokkmaur</h1>\n          </header>\n          <Home />\n          {/* <TestComponent /> */}\n        </div>\n      </AudioContextProvider>\n      <div id=\"audio-container\"></div>\n    </>\n  );\n};\n\nexport default App;\n",["200","201"],"/Users/jonasbarsten/Documents/React/react-audio-mixer/src/index.js",[],["202","203"],"/Users/jonasbarsten/Documents/React/react-audio-mixer/src/components/Controls.js",["204","205","206"],"/Users/jonasbarsten/Documents/React/react-audio-mixer/src/components/Clock.js",[],"/Users/jonasbarsten/Documents/React/react-audio-mixer/src/utils.js",[],["207","208"],"/Users/jonasbarsten/Documents/React/react-audio-mixer/src/components/AudioAnalyser.js",[],["209","210"],"/Users/jonasbarsten/Documents/React/react-audio-mixer/src/components/AudioVisualiser.js",[],["211","212"],"/Users/jonasbarsten/Documents/React/react-audio-mixer/src/components/Fader.js",[],"/Users/jonasbarsten/Documents/React/react-audio-mixer/src/components/Meter.js",[],"/Users/jonasbarsten/Documents/React/react-audio-mixer/src/components/Panner.js",[],"/Users/jonasbarsten/Documents/React/react-audio-mixer/src/components/Channel.js",[],"/Users/jonasbarsten/Documents/React/react-audio-mixer/src/components/Track.js",[],"/Users/jonasbarsten/Documents/React/react-audio-mixer/src/components/Mixer.js",[],"/Users/jonasbarsten/Documents/React/react-audio-mixer/src/context/Audio.js",["213"],"/Users/jonasbarsten/Documents/React/react-audio-mixer/src/components/Home.js",[],"/Users/jonasbarsten/Documents/React/react-audio-mixer/src/components/Vu.js",["214"],"import React, { useContext, useState, useRef, useEffect } from \"react\";\nimport { AudioContext } from \"../context/Audio\";\nimport { dBFSCalc, scale } from \"../utils\";\n\nconst nodeMap = {\n  left: \"analyserNodeL\",\n  right: \"analyserNodeR\",\n};\n\nconst Vu = (props) => {\n  const analyserNodeName = nodeMap[props.channel];\n  const [deg, setDeg] = useState(0);\n  const animationRef = useRef(null);\n  const audioContext = useContext(AudioContext);\n  const masterTrack = audioContext.getMasterTrack();\n  const bufferLength = masterTrack[analyserNodeName].fftSize;\n  const animationData = useRef(new Uint8Array(bufferLength));\n  let vuData = [];\n\n  const animate = () => {\n    const len = animationData.current.length;\n    let newDbfs = new Array(len);\n\n    masterTrack[analyserNodeName].getByteTimeDomainData(animationData.current);\n\n    for (let i = 0; i < len; ++i) {\n      newDbfs[i] = (animationData.current[i] * 2) / 255 - 1;\n    }\n\n    // TODO: set to -192 if not playing, could not get playing state from context here, it was always false\n    newDbfs = dBFSCalc(newDbfs);\n    let newDeg = Math.max(-20, scale(newDbfs + 20, -20, 0, 0, 60));\n\n    vuData.unshift(newDeg);\n\n    if (vuData.length >= 18) {\n      vuData.length = 18;\n    }\n\n    newDeg =\n      vuData.reduce((sum, curr) => {\n        return sum + curr;\n      }, 0) / vuData.length;\n\n    setDeg(newDeg);\n\n    animationRef.current = requestAnimationFrame(animate);\n  };\n\n  useEffect(() => {\n    animationRef.current = requestAnimationFrame(animate);\n    return () => cancelAnimationFrame(animationRef.current);\n  }, []);\n\n  return (\n    <div className=\"vu\">\n      <div className=\"mask\">\n        <div\n          className={`needle ${props.channel}`}\n          style={{\n            WebkitTransform: `rotate(${deg}deg)`,\n            MozTransform: `rotate(${deg}deg)`,\n            transform: `rotate(${deg}deg)`,\n          }}\n        ></div>\n      </div>\n      <p className=\"vu-label\">{props.channel[0].toUpperCase()}</p>\n    </div>\n  );\n};\n\nexport default Vu;\n",["215","216"],"/Users/jonasbarsten/Documents/React/react-audio-mixer/src/components/TestComponent.js",["217"],"import React, { useContext, useRef, useEffect } from \"react\";\n\nimport { AudioContext } from \"../context/Audio\";\n\nconst TestComponent = () => {\n  const audioContext = useContext(AudioContext);\n  const canvasRef = useRef(null);\n  const animationRef = useRef(null);\n  const masterTrack = audioContext.getMasterTrack();\n  const bufferLength = masterTrack.analyserNodeL.fftSize;\n  const animationData = useRef(new Uint8Array(bufferLength));\n\n  // TODO: start / stop animation with audio start / stop if that is necessary for performance\n  const animate = () => {\n    const width = 200;\n    const height = 200;\n    const canvas = canvasRef.current;\n    const canvasCtx = canvas.getContext(\"2d\");\n\n    masterTrack.analyserNodeL.getByteTimeDomainData(animationData.current);\n\n    canvasCtx.fillStyle = \"rgb(200, 200, 200)\";\n    canvasCtx.fillRect(0, 0, width, height);\n\n    canvasCtx.lineWidth = 2;\n    canvasCtx.strokeStyle = \"rgb(0, 0, 0)\";\n\n    const sliceWidth = (width * 1.0) / bufferLength;\n    let x = 0;\n\n    canvasCtx.beginPath();\n    for (var i = 0; i < bufferLength; i++) {\n      const v = animationData.current[i] / 128.0;\n      const y = (v * height) / 2;\n\n      if (i === 0) canvasCtx.moveTo(x, y);\n      else canvasCtx.lineTo(x, y);\n\n      x += sliceWidth;\n    }\n\n    canvasCtx.lineTo(width, height / 2);\n    canvasCtx.stroke();\n    animationRef.current = requestAnimationFrame(animate);\n  };\n\n  useEffect(() => {\n    animationRef.current = requestAnimationFrame(animate);\n    return () => cancelAnimationFrame(animationRef.current);\n  }, []);\n\n  return (\n    <div style={{ color: \"white\" }}>\n      <canvas ref={canvasRef}></canvas>\n    </div>\n  );\n};\n\nexport default TestComponent;\n",["218","219"],"/Users/jonasbarsten/Documents/React/react-audio-mixer/src/components/Loader.js",[],"/Users/dev/Documents/stokkmaur/react-audio-mixer/src/index.js",[],["220","221"],"/Users/dev/Documents/stokkmaur/react-audio-mixer/src/components/TestComponent.js",["222"],"/Users/dev/Documents/stokkmaur/react-audio-mixer/src/components/Mixer.js",["223"],"import React, { useContext, useEffect } from \"react\";\n\nimport Channel from \"./Channel\";\nimport Track from \"./Track\";\nimport Vu from \"./Vu\";\n\nimport { AudioContext } from \"../context/Audio\";\n\nconst Mixer = () => {\n  const audioContext = useContext(AudioContext);\n  const tracks = audioContext.getTracks();\n  return (\n    <div id=\"mixer\">\n      {tracks &&\n        tracks.length > 0 &&\n        tracks.map((track) => {\n          return <Channel key={track.id} track={track} />;\n        })}\n\n      <div id=\"meters\">\n        <Vu channel=\"left\" master={true} />\n        <Vu channel=\"right\" master={true} />\n      </div>\n\n      <div id=\"master\">\n        <Track master={true} />\n        <p className=\"label\">Master</p>\n      </div>\n    </div>\n  );\n};\n\nexport default Mixer;\n","/Users/dev/Documents/stokkmaur/react-audio-mixer/src/components/Track.js",[],["224","225"],"/Users/dev/Documents/stokkmaur/react-audio-mixer/src/components/Clock.js",[],["226","227"],"/Users/dev/Documents/stokkmaur/react-audio-mixer/src/utils.js",[],"/Users/dev/Documents/stokkmaur/react-audio-mixer/src/components/Panner.js",[],"/Users/dev/Documents/stokkmaur/react-audio-mixer/src/context/Audio.js",["228","229","230","231","232","233","234"],"/Users/dev/Documents/stokkmaur/react-audio-mixer/src/components/Controls.js",[],"/Users/dev/Documents/stokkmaur/react-audio-mixer/src/components/Fader.js",[],["235","236"],"/Users/dev/Documents/stokkmaur/react-audio-mixer/src/components/Loader.js",[],["237","238"],"/Users/dev/Documents/stokkmaur/react-audio-mixer/src/App.js",[],"/Users/dev/Documents/stokkmaur/react-audio-mixer/src/components/Channel.js",[],["239","240"],"/Users/dev/Documents/stokkmaur/react-audio-mixer/src/components/Vu.js",["241"],"/Users/dev/Documents/stokkmaur/react-audio-mixer/src/components/Meter.js",[],["242","243"],"/Users/dev/Documents/stokkmaur/react-audio-mixer/src/components/Home.js",[],"/Users/dev/Documents/stokkmaur/react-audio-mixer/src/libs/createPlaybackTrack.js",[],"/Users/dev/Documents/stokkmaur/react-audio-mixer/src/libs/audio.js",["244"],"import lamejs from \"lamejs\";\n\nfunction writeString(view, offset, string) {\n  for (var i = 0; i < string.length; i++) {\n    view.setUint8(offset + i, string.charCodeAt(i));\n  }\n}\n\nfunction floatTo16BitPCM(output, offset, input) {\n  for (var i = 0; i < input.length; i++, offset += 2) {\n    var s = Math.max(-1, Math.min(1, input[i]));\n    output.setInt16(offset, s < 0 ? s * 0x8000 : s * 0x7fff, true);\n  }\n}\n\nfunction mergeBuffers(buffers, recLength) {\n  console.log(buffers);\n  console.log(recLength);\n  var result = new Float32Array(recLength);\n  console.log(result);\n  var offset = 0;\n  for (var i = 0; i < buffers.length; i++) {\n    result.set(buffers[i], offset);\n    offset += buffers[i].length;\n  }\n  return result;\n}\n\nfunction interleave(inputL, inputR) {\n  var length = inputL.length + inputR.length;\n  // var result = new Float32Array(length);\n  var result = new Int16Array(length);\n\n  var index = 0,\n    inputIndex = 0;\n\n  while (index < length) {\n    result[index++] = inputL[inputIndex];\n    result[index++] = inputR[inputIndex];\n    inputIndex++;\n  }\n  return result;\n}\n\nfunction encodeWAV(samples, numChannels, sampleRate) {\n  var buffer = new ArrayBuffer(44 + samples.length * 2);\n  var view = new DataView(buffer);\n\n  /* RIFF identifier */\n  writeString(view, 0, \"RIFF\");\n  /* RIFF chunk length */\n  view.setUint32(4, 36 + samples.length * 2, true);\n  /* RIFF type */\n  writeString(view, 8, \"WAVE\");\n  /* format chunk identifier */\n  writeString(view, 12, \"fmt \");\n  /* format chunk length */\n  view.setUint32(16, 16, true);\n  /* sample format (raw) */\n  view.setUint16(20, 1, true);\n  /* channel count */\n  view.setUint16(22, numChannels, true);\n  /* sample rate */\n  view.setUint32(24, sampleRate, true);\n  /* byte rate (sample rate * block align) */\n  view.setUint32(28, sampleRate * 4, true);\n  /* block align (channel count * bytes per sample) */\n  view.setUint16(32, numChannels * 2, true);\n  /* bits per sample */\n  view.setUint16(34, 16, true);\n  /* data chunk identifier */\n  writeString(view, 36, \"data\");\n  /* data chunk length */\n  view.setUint32(40, samples.length * 2, true);\n\n  floatTo16BitPCM(view, 44, samples);\n\n  return view;\n}\n\nexport function createAsyncBufferSource(audioCtx, arrayBuffer) {\n  return new Promise((resolve, reject) => {\n    audioCtx.decodeAudioData(\n      arrayBuffer,\n      (buffer) => {\n        resolve(buffer);\n      },\n      (e) => {\n        e = reject;\n      }\n    );\n  });\n}\n\nexport function offsetBuffer(audioCtx, recordingBuffer, before, after) {\n  console.log(\"player.offsetBuffer\", recordingBuffer, before, after);\n  var i = 0,\n    channel = 0,\n    channelTotal = 2,\n    num = 0,\n    audioBuffer = audioCtx.createBuffer(\n      channelTotal,\n      before + recordingBuffer[0].length + after,\n      audioCtx.sampleRate\n    ),\n    buffer = null;\n  for (channel = 0; channel < channelTotal; channel += 1) {\n    buffer = audioBuffer.getChannelData(channel);\n    for (i = 0; i < before; i += 1) {\n      buffer[num] = 0;\n      num += 1;\n    }\n    for (i = 0; i < recordingBuffer[channel].length; i += 1) {\n      buffer[num] = recordingBuffer[channel][i];\n      num += 1;\n    }\n    for (i = 0; i < after; i += 1) {\n      buffer[num] = 0;\n      num += 1;\n    }\n  }\n  return audioBuffer;\n}\n\nexport function getOffset(\n  audioCtx,\n  recordingBuffer,\n  referenceBuffer,\n  offset,\n  recorder\n) {\n  let diff = recorder.startTime + offset / 1000 - referenceBuffer.startTime;\n  console.log(\"player.getOffset\", diff);\n  return {\n    before: Math.round(\n      (diff % referenceBuffer.buffer.duration) * audioCtx.sampleRate\n    ),\n    after: Math.round(\n      (referenceBuffer.buffer.duration -\n        ((diff + recordingBuffer.duration) % referenceBuffer.buffer.duration)) *\n        audioCtx.sampleRate\n    ),\n  };\n}\n\nexport function createBuffer(audioCtx, buffers, channelTotal) {\n  let channel = 0;\n  let buffer = audioCtx.createBuffer(\n    channelTotal,\n    buffers[0].length,\n    audioCtx.sampleRate\n  );\n  for (channel = 0; channel < channelTotal; channel += 1) {\n    buffer.getChannelData(channel).set(buffers[channel]);\n  }\n  return buffer;\n}\n\nexport function exportWAV(type, allBuffers, recLength, numChannels) {\n  // var buffers = [];\n  // for (var channel = 0; channel < numChannels; channel++) {\n  //   buffers.push(mergeBuffers(allBuffers[channel], recLength));\n  // }\n  let interleaved = undefined;\n  if (numChannels === 2) {\n    interleaved = interleave(allBuffers[2], allBuffers[4]);\n  } else {\n    interleaved = allBuffers[0];\n  }\n  const dataView = encodeWAV(interleaved, numChannels, 48000);\n  const audioBlob = new Blob([dataView], { type: type });\n  console.log(audioBlob);\n\n  forceDownload(audioBlob, \"my mix.wav\");\n}\n\nexport function exportMP3(allBuffers) {\n  const channels = 1; //1 for mono or 2 for stereo\n  const sampleRate = 44100; //44.1khz (normal mp3 samplerate)\n  const kbps = 128; //encode 128kbps mp3\n  const mp3encoder = new lamejs.Mp3Encoder(channels, sampleRate, kbps);\n\n  const interleaved = interleave(allBuffers[2], allBuffers[4]);\n\n  const samples = interleaved; //one second of silence (get your data from the source you have)\n  const sampleBlockSize = 1152; //can be anything but make it a multiple of 576 to make encoders life easier\n\n  var mp3Data = [];\n  for (var i = 0; i < samples.length; i += sampleBlockSize) {\n    const sampleChunk = samples.subarray(i, i + sampleBlockSize);\n    var mp3buf = mp3encoder.encodeBuffer(sampleChunk);\n    if (mp3buf.length > 0) {\n      mp3Data.push(mp3buf);\n    }\n  }\n  const d = mp3encoder.flush(); //finish writing mp3\n\n  if (d.length > 0) {\n    mp3Data.push(new Int8Array(mp3buf));\n  }\n\n  const blob = new Blob(mp3Data, { type: \"audio/mp3\" });\n  forceDownload(blob, \"test.mp3\");\n}\n\nfunction forceDownload(blob, fileName) {\n  const url = (window.URL || window.webkitURL).createObjectURL(blob);\n  const link = window.document.createElement(\"a\");\n  link.href = url;\n  link.download = fileName || \"my mix.wav\";\n  link.click();\n}\n\n// export function exportWAV(\n//   type,\n//   allBuffers,\n//   recLength,\n//   numChannels,\n//   before = 0,\n//   after = 0\n// ) {\n//   // if (!before) {\n//   //   before = 0;\n//   // }\n//   // if (!after) {\n//   //   after = 0;\n//   // }\n\n//   var channel = 0,\n//     buffers = [];\n//   for (channel = 0; channel < numChannels; channel++) {\n//     buffers.push(mergeBuffers(allBuffers[channel], recLength));\n//   }\n\n//   var i = 0,\n//     offset = 0,\n//     newbuffers = [];\n\n//   for (channel = 0; channel < numChannels; channel += 1) {\n//     offset = 0;\n//     newbuffers[channel] = new Float32Array(before + recLength + after);\n//     if (before > 0) {\n//       for (i = 0; i < before; i += 1) {\n//         newbuffers[channel].set([0], offset);\n//         offset += 1;\n//       }\n//     }\n//     newbuffers[channel].set(buffers[channel], offset);\n//     offset += buffers[channel].length;\n//     if (after > 0) {\n//       for (i = 0; i < after; i += 1) {\n//         newbuffers[channel].set([0], offset);\n//         offset += 1;\n//       }\n//     }\n//   }\n\n//   let interleaved = undefined;\n\n//   if (numChannels === 2) {\n//     interleaved = interleave(newbuffers[0], newbuffers[1]);\n//   } else {\n//     interleaved = newbuffers[0];\n//   }\n\n//   // var downsampledBuffer = downsampleBuffer(interleaved, rate);\n//   // var dataview = encodeWAV(downsampledBuffer, rate);\n//   const dataView = encodeWAV(interleaved, numChannels, 48000);\n//   var audioBlob = new Blob([dataView], { type: type });\n\n//   forceDownload(audioBlob, \"my mix.wav\");\n\n//   // this.postMessage(audioBlob);\n// }\n","/Users/dev/Documents/stokkmaur/react-audio-mixer/src/libs/createMasterTrack.js",[],"/Users/dev/Documents/stokkmaur/react-audio-mixer/src/reportWebVitals.js",[],["245","246"],"/Users/dev/Documents/stokkmaur/react-audio-mixer/src/libs/createInputTrack.js",[],["247","248"],"/Users/dev/Documents/stokkmaur/react-audio-mixer/src/hooks/useQueryParams.js",[],"/Users/dev/Documents/stokkmaur/react-audio-mixer/src/components/Header.js",[],"/Users/dev/Documents/stokkmaur/react-audio-mixer/src/libs/audio-test.js",[],{"ruleId":"249","replacedBy":"250"},{"ruleId":"251","replacedBy":"252"},{"ruleId":"253","severity":1,"message":"254","line":5,"column":8,"nodeType":"255","messageId":"256","endLine":5,"endColumn":21},{"ruleId":"249","replacedBy":"257"},{"ruleId":"251","replacedBy":"258"},{"ruleId":"249","replacedBy":"259"},{"ruleId":"251","replacedBy":"260"},{"ruleId":"253","severity":1,"message":"261","line":1,"column":29,"nodeType":"255","messageId":"256","endLine":1,"endColumn":38},{"ruleId":"253","severity":1,"message":"262","line":1,"column":40,"nodeType":"255","messageId":"256","endLine":1,"endColumn":48},{"ruleId":"253","severity":1,"message":"263","line":5,"column":10,"nodeType":"255","messageId":"256","endLine":5,"endColumn":45},{"ruleId":"249","replacedBy":"264"},{"ruleId":"251","replacedBy":"265"},{"ruleId":"249","replacedBy":"266"},{"ruleId":"251","replacedBy":"267"},{"ruleId":"249","replacedBy":"268"},{"ruleId":"251","replacedBy":"269"},{"ruleId":"270","severity":1,"message":"271","line":64,"column":6,"nodeType":"272","endLine":64,"endColumn":8,"suggestions":"273"},{"ruleId":"270","severity":1,"message":"274","line":53,"column":6,"nodeType":"272","endLine":53,"endColumn":8,"suggestions":"275"},{"ruleId":"249","replacedBy":"276"},{"ruleId":"251","replacedBy":"277"},{"ruleId":"270","severity":1,"message":"274","line":50,"column":6,"nodeType":"272","endLine":50,"endColumn":8,"suggestions":"278"},{"ruleId":"249","replacedBy":"279"},{"ruleId":"251","replacedBy":"280"},{"ruleId":"249","replacedBy":"281"},{"ruleId":"251","replacedBy":"282"},{"ruleId":"270","severity":1,"message":"274","line":50,"column":6,"nodeType":"272","endLine":50,"endColumn":8,"suggestions":"283"},{"ruleId":"253","severity":1,"message":"261","line":1,"column":29,"nodeType":"255","messageId":"256","endLine":1,"endColumn":38},{"ruleId":"249","replacedBy":"284"},{"ruleId":"251","replacedBy":"285"},{"ruleId":"249","replacedBy":"286"},{"ruleId":"251","replacedBy":"287"},{"ruleId":"253","severity":1,"message":"288","line":11,"column":35,"nodeType":"255","messageId":"256","endLine":11,"endColumn":44},{"ruleId":"253","severity":1,"message":"289","line":11,"column":46,"nodeType":"255","messageId":"256","endLine":11,"endColumn":55},{"ruleId":"253","severity":1,"message":"290","line":13,"column":10,"nodeType":"255","messageId":"256","endLine":13,"endColumn":29},{"ruleId":"253","severity":1,"message":"291","line":46,"column":16,"nodeType":"255","messageId":"256","endLine":46,"endColumn":23},{"ruleId":"270","severity":1,"message":"292","line":78,"column":6,"nodeType":"272","endLine":78,"endColumn":8,"suggestions":"293"},{"ruleId":"253","severity":1,"message":"294","line":109,"column":9,"nodeType":"255","messageId":"256","endLine":109,"endColumn":24},{"ruleId":"270","severity":1,"message":"295","line":220,"column":9,"nodeType":"296","endLine":226,"endColumn":4,"suggestions":"297"},{"ruleId":"249","replacedBy":"298"},{"ruleId":"251","replacedBy":"299"},{"ruleId":"249","replacedBy":"300"},{"ruleId":"251","replacedBy":"301"},{"ruleId":"249","replacedBy":"302"},{"ruleId":"251","replacedBy":"303"},{"ruleId":"270","severity":1,"message":"274","line":53,"column":6,"nodeType":"272","endLine":53,"endColumn":8,"suggestions":"304"},{"ruleId":"249","replacedBy":"305"},{"ruleId":"251","replacedBy":"306"},{"ruleId":"253","severity":1,"message":"307","line":16,"column":10,"nodeType":"255","messageId":"256","endLine":16,"endColumn":22},{"ruleId":"249","replacedBy":"308"},{"ruleId":"251","replacedBy":"309"},{"ruleId":"249","replacedBy":"310"},{"ruleId":"251","replacedBy":"311"},"no-native-reassign",["312"],"no-negated-in-lhs",["313"],"no-unused-vars","'TestComponent' is defined but never used.","Identifier","unusedVar",["312"],["313"],["312"],["313"],"'useEffect' is defined but never used.","'useState' is defined but never used.","'unstable_renderSubtreeIntoContainer' is defined but never used.",["312"],["313"],["312"],["313"],["312"],["313"],"react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'loadAudio'. Either include it or remove the dependency array.","ArrayExpression",["314"],"React Hook useEffect has a missing dependency: 'animate'. Either include it or remove the dependency array.",["315"],["312"],["313"],["316"],["312"],["313"],["312"],["313"],["317"],["312"],["313"],["312"],["313"],"'exportWAV' is defined but never used.","'exportMP3' is defined but never used.","'downloadAudioBuffer' is defined but never used.","'setSong' is assigned a value but never used.","React Hook useEffect has missing dependencies: 'loadAudio' and 'tracks'. Either include them or remove the dependency array.",["318"],"'createInputNode' is assigned a value but never used.","The 'togglePlayAll' function makes the dependencies of useEffect Hook (at line 239) change on every render. To fix this, wrap the definition of 'togglePlayAll' in its own useCallback() Hook.","VariableDeclarator",["319"],["312"],["313"],["312"],["313"],["312"],["313"],["320"],["312"],["313"],"'mergeBuffers' is defined but never used.",["312"],["313"],["312"],["313"],"no-global-assign","no-unsafe-negation",{"desc":"321","fix":"322"},{"desc":"323","fix":"324"},{"desc":"323","fix":"325"},{"desc":"323","fix":"326"},{"desc":"327","fix":"328"},{"desc":"329","fix":"330"},{"desc":"323","fix":"331"},"Update the dependencies array to be: [loadAudio]",{"range":"332","text":"333"},"Update the dependencies array to be: [animate]",{"range":"334","text":"335"},{"range":"336","text":"335"},{"range":"337","text":"335"},"Update the dependencies array to be: [loadAudio, tracks]",{"range":"338","text":"339"},"Wrap the definition of 'togglePlayAll' in its own useCallback() Hook.",{"range":"340","text":"341"},{"range":"342","text":"335"},[2152,2154],"[loadAudio]",[1567,1569],"[animate]",[1546,1548],[1546,1548],[2460,2462],"[loadAudio, tracks]",[6128,6213],"useCallback(() => {\n    if (!playing) {\n      playAll();\n    } else {\n      pauseAll();\n    }\n  })",[1567,1569]]